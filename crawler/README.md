# Краулер профилей ВКонтакте

Скрипт для сбора детальной информации о постах и профилях пользователей ВКонтакте с поддержкой двухфакторной аутентификации.

## Возможности

- Авторизация на сайте VK с использованием номера телефона/логина и пароля
- Поддержка двухфакторной аутентификации через SMS
- Извлечение информации о профиле пользователя (имя, статус, верификация, город и т.д.)
- Извлечение детальных данных о постах:
  - Текст поста
  - Дата публикации
  - Количество лайков, репостов, комментариев и просмотров
  - URL изображений
  - Информация об авторе
- Обработка закрытых и открытых профилей
- Сохранение результатов в структурированный JSON-файл
- Настройка параметров через аргументы командной строки

## Установка

Установите зависимости:

```bash
pip install -r requirements.txt
```

## Использование

Запуск скрипта (обратите внимание, что требуется указать логин и пароль):

```bash
python main.py --login ваш_логин --password ваш_пароль
```

Запуск с пользовательскими параметрами:

```bash
python main.py --login ваш_логин --password ваш_пароль --user username --scrolls 5 --output results.json
```

### Доступные параметры

- `--login` - Логин пользователя VK (**обязательный параметр**)
- `--password` - Пароль пользователя VK (**обязательный параметр**)
- `--user` - ID пользователя, чьи посты нужно собрать (по умолчанию: durov)
- `--scrolls` - Количество прокруток страницы (по умолчанию: 10)
- `--output` - Путь к выходному файлу (по умолчанию: vk_posts.json)

## Формат данных

Скрипт сохраняет данные в JSON-файл в следующем формате:

```json
[
  {
    "post_id": "1_2407925",
    "text": "Текст поста...",
    "date_text": "30 апр 2018",
    "date_href": "/wall1_2407925",
    "likes": 88020,
    "reposts": 2634,
    "comments": 0,
    "author": "Павел Дуров",
    "images": ["https://sun121-1.userapi.com/...jpg"],
    "profile_info": {
      "name": "Павел Дуров",
      "user_id": "durov",
      "status": "создаю будущее",
      "followers_count": 11112,
      "city": "Saint Petersburg",
      "verified": true
    }
  }
]
```

## Особенности работы с двухфакторной аутентификацией

Если на аккаунте включена двухфакторная аутентификация:

1. Скрипт будет запрашивать код из SMS-сообщения в консоли
2. После ввода SMS-кода нужно будет ввести пароль
3. Если появится системное окно "Безопасность Windows" с запросом ключа доступа - нажмите "Отмена"

## Обработка ошибок

Скрипт обрабатывает следующие сценарии:
- Закрытые профили пользователей
- Несуществующие страницы
- Ошибки при авторизации
- Таймауты при загрузке страниц

## Примечания

- Для работы скрипта требуется Chrome браузер
- Скрипт использует explicit waits для ожидания элементов
- Добавлена обработка основных ошибок
- **Важно**: Часть функционала по парсингу постов пока находится в разработке 